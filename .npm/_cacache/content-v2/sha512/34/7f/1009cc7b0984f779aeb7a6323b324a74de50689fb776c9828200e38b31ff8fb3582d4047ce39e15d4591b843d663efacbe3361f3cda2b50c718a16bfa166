{"_id":"promise-stream-reader","_rev":"2-aae1564782e366e887dd384cb1891eea","name":"promise-stream-reader","dist-tags":{"latest":"1.0.1"},"versions":{"1.0.0":{"name":"promise-stream-reader","version":"1.0.0","description":"Consume Node.js readable streams using promises.","homepage":"https://github.com/princjef/promise-stream-reader#readme","repository":{"type":"git","url":"git+https://github.com/princjef/promise-stream-reader.git"},"bugs":{"url":"https://github.com/princjef/promise-stream-reader/issues"},"engines":{"node":">8.0.0"},"main":"dist/index.js","types":"dist/index.d.ts","scripts":{"commit":"commit","commitmsg":"commitlint -e $GIT_PARAMS","lint":"tslint --project tsconfig.json --fix","clean":"rimraf dist","prebuild":"npm run clean && npm run lint","build":"tsc","watch":"tsc -w","pretest":"npm run build","test":"nyc ava dist/**/*.spec.js","pretest-nocover":"npm run build","test-nocover":"ava dist/**/*.spec.js","show-coverage":"opener ./coverage/index.html","coverage":"nyc report --reporter=text-lcov > coverage.lcov && codecov"},"keywords":["promise","stream","readable","pipe"],"author":{"name":"Jeff Principe","email":"princjef@gmail.com"},"license":"MIT","devDependencies":{"@commitlint/cli":"^6.1.3","@commitlint/config-conventional":"^6.1.3","@commitlint/prompt-cli":"^6.1.3","@commitlint/travis-cli":"^6.1.3","@types/node":"^8.10.10","ava":"^0.25.0","codecov":"^3.0.1","husky":"^0.14.3","nyc":"^11.7.1","opener":"^1.4.3","rimraf":"^2.6.2","semantic-release":"^15.1.7","tslint":"^5.9.1","tslint-config-standard":"^7.0.0","typescript":"^2.8.3"},"nyc":{"sourceMap":true,"reporter":["text","html","json"],"include":["dist/**/*.js"],"exclude":["dist/**/*.spec.*","dist/**/*.d.ts","dist/**/*.map*"],"check-coverage":true,"lines":100,"statements":100,"functions":100,"branches":100,"watermarks":{"lines":[100,100],"statements":[100,100],"functions":[100,100],"branches":[100,100]}},"commitlint":{"extends":["@commitlint/config-conventional"]},"gitHead":"7c981880439849f9a32d84d9f88e0102ed3b3282","_id":"promise-stream-reader@1.0.0","_npmVersion":"5.6.0","_nodeVersion":"8.11.1","_npmUser":{"name":"princjef","email":"princjef@gmail.com"},"dist":{"integrity":"sha512-GMl89wAWnt9c/nQhYnioxeemaS+xg+oqmz4m6XrNGR/LJal2aTnh57/1UNADytk4FWMXfpo6b+5V0gqOpjbMUQ==","shasum":"e8418221a8ce0e98ad865ae768d8f7d87243498b","tarball":"https://registry.npmjs.org/promise-stream-reader/-/promise-stream-reader-1.0.0.tgz","fileCount":7,"unpackedSize":12104,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJa5LvICRA9TVsSAnZWagAA/VEP/Ryl9e/T209F/6qPWg4b\nBFsULtDJiC1kIl182xqbpg04Xo62sRjhfwkERW56tVX9M0g+xloJkR+yhGRH\n7eCtVSmys+7HRGpTLv5yWT56D7HmjKMel+g1kvzTiyOeB+ADzHPjLyPMECHW\nCQJvMai5hctOFlm9agaPORHCL7sSXJQ4/6fxUQ/f/b6TjKxQUsmSW/sSaV1R\nLkaGXwmG+DC/mSUKcS8m9r7TKsZekzqIMJ+ln0r8a8M2XQvNq7r409Tuyg0w\nxvLVUPn9+dA7SGiqhQeHaQH6HRU+fDap2cXTYFz8/b2nnPsICd9lPcnUvPWh\n3r4yeonyFC1mI1JVPaizVnQACbtBe2d+29KbHxLnaHABBm658p6y4vSIhwZF\nT12yzim9fi7mzBZR7Zs0hJ9FbGAK+zejTDVYH7mIOSmKNTnrtamBd6zynGMi\nQ9Wq4RvOOOrEpi8Kv9OlEUIjcLE/LdcTmn50HV1owma6yCYKsSUj3Hlm8QiF\nFeX5ZAqg4d7WMpZIAcW5Wy/NWWsPXOO+ifI8d4TK0fwnXaZIMVGKVtuDNEkO\neq4Z2mJz9JQcJAww+DLZLMpQWYoGF42yepiBdnDbjqKIQhJVQ/x+NhCyoPVe\nIOYn6/rzY/Irib/09vxIo5TCejykidI2Q6P7c4isv7IkxGpCVcHxHHnUOi9Q\n9id0\r\n=HxLp\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIF/qA8dmQ4WzEOTSxGShgvI2eaoGmmHCz59ySK1jlieuAiEAhFMxY5bBTmZbhL1ap7rfd8E3dm8XapMg6QB1zeaUmv8="}]},"maintainers":[{"name":"princjef","email":"princjef@gmail.com"}],"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/promise-stream-reader_1.0.0_1524939719297_0.6828782542622234"},"_hasShrinkwrap":false},"1.0.1":{"name":"promise-stream-reader","version":"1.0.1","description":"Consume Node.js readable streams using promises.","homepage":"https://github.com/princjef/promise-stream-reader#readme","repository":{"type":"git","url":"git+https://github.com/princjef/promise-stream-reader.git"},"bugs":{"url":"https://github.com/princjef/promise-stream-reader/issues"},"engines":{"node":">8.0.0"},"main":"dist/index.js","types":"dist/index.d.ts","scripts":{"commit":"commit","commitmsg":"commitlint -e $GIT_PARAMS","lint":"tslint --project tsconfig.json --fix","clean":"rimraf dist","prebuild":"npm run clean && npm run lint","build":"tsc","watch":"tsc -w","pretest":"npm run build","test":"nyc ava dist/**/*.spec.js","pretest-nocover":"npm run build","test-nocover":"ava dist/**/*.spec.js","show-coverage":"opener ./coverage/index.html","coverage":"nyc report --reporter=text-lcov > coverage.lcov && codecov","prerelease":"npm run build","release":"semantic-release"},"keywords":["promise","stream","readable","pipe"],"author":{"name":"Jeff Principe","email":"princjef@gmail.com"},"license":"MIT","devDependencies":{"@commitlint/cli":"^6.1.3","@commitlint/config-conventional":"^6.1.3","@commitlint/prompt-cli":"^6.1.3","@commitlint/travis-cli":"^6.1.3","@types/node":"^8.10.10","ava":"^0.25.0","codecov":"^3.0.1","husky":"^0.14.3","nyc":"^11.7.1","opener":"^1.4.3","rimraf":"^2.6.2","semantic-release":"^15.1.7","tslint":"^5.9.1","tslint-config-standard":"^7.0.0","typescript":"^2.8.3"},"nyc":{"sourceMap":true,"reporter":["text","html","json"],"include":["dist/**/*.js"],"exclude":["dist/**/*.spec.*","dist/**/*.d.ts","dist/**/*.map*"],"check-coverage":true,"lines":100,"statements":100,"functions":100,"branches":100,"watermarks":{"lines":[100,100],"statements":[100,100],"functions":[100,100],"branches":[100,100]}},"commitlint":{"extends":["@commitlint/config-conventional"]},"gitHead":"ebbc9c97b36699a493968665386cee4b1a870818","_id":"promise-stream-reader@1.0.1","_npmVersion":"5.6.0","_nodeVersion":"8.11.1","_npmUser":{"name":"princjef","email":"princjef@gmail.com"},"dist":{"integrity":"sha512-Tnxit5trUjBAqqZCGWwjyxhmgMN4hGrtpW3Oc/tRI4bpm/O2+ej72BB08l6JBnGQgVDGCLvHFGjGgQS6vzhwXg==","shasum":"4e793a79c9d49a73ccd947c6da9c127f12923649","tarball":"https://registry.npmjs.org/promise-stream-reader/-/promise-stream-reader-1.0.1.tgz","fileCount":11,"unpackedSize":24760,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJa5MuKCRA9TVsSAnZWagAA2QMP/juFVgSFBRVbAWXrZsGE\nHOVbVJ2oDVM4XFmgvrpTpC4zecZec/ca8H8iAluo+bUUQg2f2NUu11SGPEYI\n06jgYMFdDvh1Kxw52JK0NmE5zAYWvpfo+CQS54p8FAXSBNSodRWrAIiUn8uM\nCPaVKSyKPQj1obXLp8YIlt/efg0sXRpIbVVtVi5hu+nBF3ssCjxoae4ZhnYO\nwVBoIglsK5MxmBqXAXOtsSab4YaUclrI6a4de920W9o9rDJ3uNaUCjdfiH3/\ncuT4Z6hu9qKzXoTF4sBhpl3rzW48387QTj9r9/9iI6R+2MCnZDDQ6OcaddLs\nn4Z72sV6lw6uQlow4HkSZXPzmhlUkQAuvOJ0wP65SwEyu7EFn+aKCguxuOTJ\nLMwaPEJ2nolapB3ZrZn+fZ8/A9yvnt1TgbtcsR9DIhJO77nlkFWmhb2Og/D/\nzmPSaN5e85t0hgeEtqy/Yu5zM2nRAIR3bNS/avd+gTjRatKnDG1AB4VytyfN\nwpOXIhkMuK+9F+3a3TN34E7Pvg+r4R28XbNLFywl82mzjDObiIJOteBsDQqa\nnUkDJS9ORBI9fRjtXUfLu0TJ+iHTU5j59xqX4M6p2ntaoH6SBupnr6+zpXzm\npa2m1F4M/c8fewdP781dNtPUZxz4WvUnuR8eo6LdDGz3OtAc0NR1YHPN4Bk7\nWc8r\r\n=xKqC\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCAAduwKZ+wgUIxL/zzl4qvDg9CYRuWLD2DP8WokfGQFQIhAKzN9zV69fiwgElLwYMlb7pcCPU1diOU8/PWzzE/YLPD"}]},"maintainers":[{"name":"princjef","email":"princjef@gmail.com"}],"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/promise-stream-reader_1.0.1_1524943753477_0.2680099554789528"},"_hasShrinkwrap":false}},"time":{"created":"2018-04-28T18:21:59.296Z","1.0.0":"2018-04-28T18:21:59.397Z","modified":"2022-05-13T12:36:27.312Z","1.0.1":"2018-04-28T19:29:13.682Z"},"maintainers":[{"name":"princjef","email":"princjef@gmail.com"}],"description":"Consume Node.js readable streams using promises.","homepage":"https://github.com/princjef/promise-stream-reader#readme","keywords":["promise","stream","readable","pipe"],"repository":{"type":"git","url":"git+https://github.com/princjef/promise-stream-reader.git"},"author":{"name":"Jeff Principe","email":"princjef@gmail.com"},"bugs":{"url":"https://github.com/princjef/promise-stream-reader/issues"},"license":"MIT","readme":"# promise-stream-reader\n\n[![Travis CI build status](https://travis-ci.org/princjef/promise-stream-reader.svg?branch=dev)](https://travis-ci.org/princjef/promise-stream-reader)\n[![codecov](https://codecov.io/gh/princjef/promise-stream-reader/branch/dev/graph/badge.svg)](https://codecov.io/gh/princjef/promise-stream-reader)\n[![npm version](https://img.shields.io/npm/v/promise-stream-reader.svg)](https://npmjs.org/package/promise-stream-reader)\n\n\nConsume data from Node.js readable streams using promises and async/await to\ncontrol flow.\n\n```\nnpm install promise-stream-reader\n```\n\n## Usage\n\nThe base export is a function that returns a writable stream to which you can\npipe your readable/duplex stream.\n\n```js\nconst promiseStream = require('promise-stream-reader');\n\nasync function readStream(readableStream) {\n    const reader = promiseStream();\n    readableStream.pipe(reader);\n\n    // Read 4 bytes of data from the stream\n    const part1 = await reader.read(4);\n\n    // Skip 10 bytes of data\n    await reader.skip(10);\n\n    // You can also have multiple read/skip calls pending at the same time. They\n    // will be filled with data in the order they were initially requested.\n    const [part2, part3] = await Promise.all([\n        reader.read(6),\n        reader.read(8)\n    ]);\n\n    // When you're all done, you can close up the streams\n    readableStream.unpipe(reader);\n    reader.destroy();\n    readableStream.destroy();\n}\n\nreadStream(/* some readable stream */)\n    .catch(err => { /* don't forget to handle rejected promises */ });\n```\n\n*NOTE: If you're using Typescript, the base exported function is available under\nthe default export.*\n\n## Why?\n\nThere are [two modes][stream two modes] for reading data from a readable stream\nin Node.js, but each has limitations that can be frustrating for a final\nconsumer:\n\n * [`on('data')`][stream data event] (flowing) allows you to deal with data as\n   it comes in, but you have to take care of packaging the data up into the\n   chunks appropriate for your use case. You will also continue to receive data\n   as fast as it comes in by default, even if you're not really ready for it.\n\n * [`read()`][stream read] (paused) allows you to explicitly request data but\n   has no mechanism for asynchronous retrieval. As a result, it will return null\n   if there is no data available yet, forcing you to poll until you get the data\n   you want. You can combine this with listening to the `'readable'` event, but\n   then you're using two patterns and still have to wrap it if you want to use\n   promises.\n\nThis solution aims to strike a balance between the two, allowing you to request\nthe data you want when you need it and have the stream provide it to you as soon\nas it's available. You get to process the data quickly without extra\nmanipulation or control flow required and can proceed at your own pace.\n\n## Contributing\n\nWant to contribute to the project? Go check out the [Contribution Guide](CONTRIBUTING.md) for instructions to set up your development environment, open\nan issue and create a pull request.\n\n[stream two modes]: https://nodejs.org/api/stream.html#stream_two_modes\n[stream read]: https://nodejs.org/api/stream.html#stream_readable_read_size\n[stream data event]: https://nodejs.org/api/stream.html#stream_event_data","readmeFilename":"README.md"}